function preload(){
    font = {
        'A' : [
            loadImage('data/caps/A/A_1.png'),
            loadImage('data/caps/A/A_2.png'),
            loadImage('data/caps/A/A_3.png'),
        ],
        'B' : [
            loadImage('data/caps/B/B_1.png'),
            loadImage('data/caps/B/B_2.png'),
            loadImage('data/caps/B/B_3.png'),
        ],
        'C' : [
            loadImage('data/caps/C/C_1.png'),
            loadImage('data/caps/C/C_2.png'),
            loadImage('data/caps/C/C_3.png'),
        ],
        'D' : [
            loadImage('data/caps/D/D_1.png'),
            loadImage('data/caps/D/D_2.png'),
            loadImage('data/caps/D/D_3.png'),
        ],
        'E' : [
            loadImage('data/caps/E/E_1.png'),
            loadImage('data/caps/E/E_2.png'),
            loadImage('data/caps/E/E_3.png'),
        ],
        'F' : [
            loadImage('data/caps/F/F_1.png'),
            loadImage('data/caps/F/F_2.png'),
            loadImage('data/caps/F/F_3.png'),
        ],
        'G' : [
            loadImage('data/caps/G/G_1.png'),
            loadImage('data/caps/G/G_2.png'),
            loadImage('data/caps/G/G_3.png'),
        ],
        'H' : [
            loadImage('data/caps/H/H_1.png'),
            loadImage('data/caps/H/H_2.png'),
            loadImage('data/caps/H/H_3.png'),
        ],
        'I' : [
            loadImage('data/caps/I/I_1.png'),
            loadImage('data/caps/I/I_2.png'),
            loadImage('data/caps/I/I_3.png'),
        ],
        'J' : [
            loadImage('data/caps/J/J_1.png'),
            loadImage('data/caps/J/J_2.png'),
            loadImage('data/caps/J/J_3.png'),
        ],
        'K' : [
            loadImage('data/caps/K/K_1.png'),
            loadImage('data/caps/K/K_2.png'),
            loadImage('data/caps/K/K_3.png'),
        ],
        'L' : [
            loadImage('data/caps/L/L_1.png'),
            loadImage('data/caps/L/L_2.png'),
            loadImage('data/caps/L/L_3.png'),
        ],
        'M' : [
            loadImage('data/caps/M/M_1.png'),
            loadImage('data/caps/M/M_2.png'),
            loadImage('data/caps/M/M_3.png'),
        ],
        'N' : [
            loadImage('data/caps/N/N_1.png'),
            loadImage('data/caps/N/N_2.png'),
            loadImage('data/caps/N/N_3.png'),
        ],
        'O' : [
            loadImage('data/caps/O/O_1.png'),
            loadImage('data/caps/O/O_2.png'),
            loadImage('data/caps/O/O_3.png'),
        ],
        'P' : [
            loadImage('data/caps/P/P_1.png'),
            loadImage('data/caps/P/P_2.png'),
            loadImage('data/caps/P/P_3.png'),
        ],
        'Q' : [
            loadImage('data/caps/Q/Q_1.png'),
            loadImage('data/caps/Q/Q_2.png'),
            loadImage('data/caps/Q/Q_3.png'),
        ],
        'R' : [
            loadImage('data/caps/R/R_1.png'),
            loadImage('data/caps/R/R_2.png'),
            loadImage('data/caps/R/R_3.png'),
        ],
        'S' : [
            loadImage('data/caps/S/S_1.png'),
            loadImage('data/caps/S/S_2.png'),
            loadImage('data/caps/S/S_3.png'),
        ],
        'T' : [
            loadImage('data/caps/T/T_1.png'),
            loadImage('data/caps/T/T_2.png'),
            loadImage('data/caps/T/T_3.png'),
        ],
        'U' : [
            loadImage('data/caps/U/U_1.png'),
            loadImage('data/caps/U/U_2.png'),
            loadImage('data/caps/U/U_3.png'),
        ],
        'V' : [
            loadImage('data/caps/V/V_1.png'),
            loadImage('data/caps/V/V_2.png'),
            loadImage('data/caps/V/V_3.png'),
        ],
        'W' : [
            loadImage('data/caps/W/W_1.png'),
            loadImage('data/caps/W/W_2.png'),
            loadImage('data/caps/W/W_3.png'),
        ],
        'X' : [
            loadImage('data/caps/X/X_1.png'),
            loadImage('data/caps/X/X_2.png'),
            loadImage('data/caps/X/X_3.png'),
        ],
        'Y' : [
            loadImage('data/caps/Y/Y_1.png'),
            loadImage('data/caps/Y/Y_2.png'),
            loadImage('data/caps/Y/Y_3.png'),
        ],
        'Z' : [
            loadImage('data/caps/Z/Z_1.png'),
            loadImage('data/caps/Z/Z_2.png'),
            loadImage('data/caps/Z/Z_3.png'),
        ],
        'a' : [
            loadImage('data/small/a/a_1.png'),
            loadImage('data/small/a/a_2.png'),
            loadImage('data/small/a/a_3.png'),
        ],
        'b' : [
            loadImage('data/small/b/b_1.png'),
            loadImage('data/small/b/b_2.png'),
            loadImage('data/small/b/b_3.png'),
        ],
        'c' : [
            loadImage('data/small/c/c_1.png'),
            loadImage('data/small/c/c_2.png'),
            loadImage('data/small/c/c_3.png'),
        ],
        'd' : [
            loadImage('data/small/d/d_1.png'),
            loadImage('data/small/d/d_2.png'),
            loadImage('data/small/d/d_3.png'),
        ],
        'e' : [
            loadImage('data/small/e/e_1.png'),
            loadImage('data/small/e/e_2.png'),
            loadImage('data/small/e/e_3.png'),
        ],
        'f' : [
            loadImage('data/small/f/f_1.png'),
            loadImage('data/small/f/f_2.png'),
            loadImage('data/small/f/f_3.png'),
        ],
        'g' : [
            loadImage('data/small/g/g_1.png'),
            loadImage('data/small/g/g_2.png'),
            loadImage('data/small/g/g_3.png'),
        ],
        'h' : [
            loadImage('data/small/h/h_1.png'),
            loadImage('data/small/h/h_2.png'),
            loadImage('data/small/h/h_3.png'),
        ],
        'i' : [
            loadImage('data/small/i/i_1.png'),
            loadImage('data/small/i/i_2.png'),
            loadImage('data/small/i/i_3.png'),
        ],
        'j' : [
            loadImage('data/small/j/j_1.png'),
            loadImage('data/small/j/j_2.png'),
            loadImage('data/small/j/j_3.png'),
        ],
        'k' : [
            loadImage('data/small/k/k_1.png'),
            loadImage('data/small/k/k_2.png'),
            loadImage('data/small/k/k_3.png'),
        ],
        'l' : [
            loadImage('data/small/l/l_1.png'),
            loadImage('data/small/l/l_2.png'),
            loadImage('data/small/l/l_3.png'),
        ],
        'm' : [
            loadImage('data/small/m/m_1.png'),
            loadImage('data/small/m/m_2.png'),
            loadImage('data/small/m/m_3.png'),
        ],
        'n' : [
            loadImage('data/small/n/n_1.png'),
            loadImage('data/small/n/n_2.png'),
            loadImage('data/small/n/n_3.png'),
        ],
        'o' : [
            loadImage('data/small/o/o_1.png'),
            loadImage('data/small/o/o_2.png'),
            loadImage('data/small/o/o_3.png'),
        ],
        'p' : [
            loadImage('data/small/p/p_1.png'),
            loadImage('data/small/p/p_2.png'),
            loadImage('data/small/p/p_3.png'),
        ],
        'q' : [
            loadImage('data/small/q/q_1.png'),
            loadImage('data/small/q/q_2.png'),
            loadImage('data/small/q/q_3.png'),
        ],
        'r' : [
            loadImage('data/small/r/r_1.png'),
            loadImage('data/small/r/r_2.png'),
            loadImage('data/small/r/r_3.png'),
        ],
        's' : [
            loadImage('data/small/s/s_1.png'),
            loadImage('data/small/s/s_2.png'),
            loadImage('data/small/s/s_3.png'),
        ],
        't' : [
            loadImage('data/small/t/t_1.png'),
            loadImage('data/small/t/t_2.png'),
            loadImage('data/small/t/t_3.png'),
        ],
        'u' : [
            loadImage('data/small/u/u_1.png'),
            loadImage('data/small/u/u_2.png'),
            loadImage('data/small/u/u_3.png'),
        ],
        'v' : [
            loadImage('data/small/v/v_1.png'),
            loadImage('data/small/v/v_2.png'),
            loadImage('data/small/v/v_3.png'),
        ],
        'w' : [
            loadImage('data/small/w/w_1.png'),
            loadImage('data/small/w/w_2.png'),
            loadImage('data/small/w/w_3.png'),
        ],
        'x' : [
            loadImage('data/small/x/x_1.png'),
            loadImage('data/small/x/x_2.png'),
            loadImage('data/small/x/x_3.png'),
        ],
        'y' : [
            loadImage('data/small/y/y_1.png'),
            loadImage('data/small/y/y_2.png'),
            loadImage('data/small/y/y_3.png'),
        ],
        'z' : [
            loadImage('data/small/z/z_1.png'),
            loadImage('data/small/z/z_2.png'),
            loadImage('data/small/z/z_3.png'),
        ],
        '0' : [
            loadImage('data/nums/0/0_1.png'),
            loadImage('data/nums/0/0_2.png'),
            loadImage('data/nums/0/0_3.png'),
        ],
        '1' : [
            loadImage('data/nums/1/1_1.png'),
            loadImage('data/nums/1/1_2.png'),
            loadImage('data/nums/1/1_3.png'),
        ],
        '2' : [
            loadImage('data/nums/2/2_1.png'),
            loadImage('data/nums/2/2_2.png'),
            loadImage('data/nums/2/2_3.png'),
        ],
        '3' : [
            loadImage('data/nums/3/3_1.png'),
            loadImage('data/nums/3/3_2.png'),
            loadImage('data/nums/3/3_3.png'),
        ],
        '4' : [
            loadImage('data/nums/4/4_1.png'),
            loadImage('data/nums/4/4_2.png'),
            loadImage('data/nums/4/4_3.png'),
        ],
        '5' : [
            loadImage('data/nums/5/5_1.png'),
            loadImage('data/nums/5/5_2.png'),
            loadImage('data/nums/5/5_3.png'),
        ],
        '6' : [
            loadImage('data/nums/6/6_1.png'),
            loadImage('data/nums/6/6_2.png'),
            loadImage('data/nums/6/6_3.png'),
        ],
        '7' : [
            loadImage('data/nums/7/7_1.png'),
            loadImage('data/nums/7/7_2.png'),
            loadImage('data/nums/7/7_3.png'),
        ],
        '8' : [
            loadImage('data/nums/8/8_1.png'),
            loadImage('data/nums/8/8_2.png'),
            loadImage('data/nums/8/8_3.png'),
        ],
        '9' : [
            loadImage('data/nums/9/9_1.png'),
            loadImage('data/nums/9/9_2.png'),
            loadImage('data/nums/9/9_3.png'),
        ],
        ',' : [
            loadImage('data/syms/comma/comma_1.png'),
            loadImage('data/syms/comma/comma_2.png'),
            loadImage('data/syms/comma/comma_3.png'),
        ],
        ':' : [
            loadImage('data/syms/colon/colon_1.png'),
            loadImage('data/syms/colon/colon_2.png'),
            loadImage('data/syms/colon/colon_3.png'),
        ],
        '-' : [
            loadImage('data/syms/dash/dash_1.png'),
            loadImage('data/syms/dash/dash_2.png'),
            loadImage('data/syms/dash/dash_3.png'),
        ],
        '.' : [
            loadImage('data/syms/dot/dot_1.png'),
            loadImage('data/syms/dot/dot_2.png'),
            loadImage('data/syms/dot/dot_3.png'),
        ],
        '=' : [
            loadImage('data/syms/equals/equals_1.png'),
            loadImage('data/syms/equals/equals_2.png'),
            loadImage('data/syms/equals/equals_3.png'),
        ],
        ')' : [
            loadImage('data/syms/rndBrcC/rndBrcC_1.png'),
            loadImage('data/syms/rndBrcC/rndBrcC_2.png'),
            loadImage('data/syms/rndBrcC/rndBrcC_3.png'),
        ],
        '(' : [
            loadImage('data/syms/rndBrcO/rndBrcO_1.png'),
            loadImage('data/syms/rndBrcO/rndBrcO_2.png'),
            loadImage('data/syms/rndBrcO/rndBrcO_3.png'),
        ],
        ']' : [
            loadImage('data/syms/sqrBrcC/sqrBrcC_1.png'),
            loadImage('data/syms/sqrBrcC/sqrBrcC_2.png'),
            loadImage('data/syms/sqrBrcC/sqrBrcC_3.png'),
        ],
        '[' : [
            loadImage('data/syms/sqrBrcO/sqrBrcO_1.png'),
            loadImage('data/syms/sqrBrcO/sqrBrcO_2.png'),
            loadImage('data/syms/sqrBrcO/sqrBrcO_3.png'),
        ],
        '?' : [
            loadImage('data/syms/qmark/qmark_1.png'),
            loadImage('data/syms/qmark/qmark_2.png'),
            loadImage('data/syms/qmark/qmark_3.png'),
        ],
        '#' : [
            loadImage('data/syms/hash/hash_1.png'),
            loadImage('data/syms/hash/hash_2.png'),
            loadImage('data/syms/hash/hash_3.png'),
        ],
        '_' : [
            loadImage('data/syms/underscore/underscore_1.png'),
            loadImage('data/syms/underscore/underscore_2.png'),
            loadImage('data/syms/underscore/underscore_3.png'),
        ],
        '"' : [
            loadImage('data/syms/dQuotes/dQuotes_1.png'),
            loadImage('data/syms/dQuotes/dQuotes_2.png'),
            loadImage('data/syms/dQuotes/dQuotes_3.png'),
        ],
        "'" : [
            loadImage('data/syms/quote/quote_1.png'),
            loadImage('data/syms/quote/quote_2.png'),
            loadImage('data/syms/quote/quote_3.png'),
        ],
        "/" : [
            loadImage('data/syms/slash/slash_1.png'),
            loadImage('data/syms/slash/slash_2.png'),
            loadImage('data/syms/slash/slash_3.png'),
        ],
        "@" : [
            loadImage('data/syms/at/at_1.png'),
            loadImage('data/syms/at/at_2.png'),
            loadImage('data/syms/at/at_3.png'),
        ],
        "*" : [
            loadImage('data/syms/astrix/astrix_1.png'),
            loadImage('data/syms/astrix/astrix_2.png'),
            loadImage('data/syms/astrix/astrix_3.png'),
        ],
        "<" : [
            loadImage('data/syms/angleBrcO/angleBrcO_1.png'),
            loadImage('data/syms/angleBrcO/angleBrcO_2.png'),
            loadImage('data/syms/angleBrcO/angleBrcO_3.png'),
        ],
        ">" : [
            loadImage('data/syms/angleBrcC/angleBrcC_1.png'),
            loadImage('data/syms/angleBrcC/angleBrcC_2.png'),
            loadImage('data/syms/angleBrcC/angleBrcC_3.png'),
        ],
        "&" : [
            loadImage('data/syms/and/and_1.png'),
            loadImage('data/syms/and/and_2.png'),
            loadImage('data/syms/and/and_3.png'),
        ],
        ";" : [
            loadImage('data/syms/semicolon/semicolon_1.png'),
            loadImage('data/syms/semicolon/semicolon_2.png'),
            loadImage('data/syms/semicolon/semicolon_3.png'),
        ],
        "fi" : [
            loadImage('data/syms/fi/fi_1.png'),
            loadImage('data/syms/fi/fi_2.png'),
            loadImage('data/syms/fi/fi_3.png'),

        ]
    }

    bg = loadImage(`${document.getElementById('pgName').value}`)
}
var pgName
function setup() {

    canvY = (bg.height), canvX = (bg.width)

    createCanvas(canvX, canvY);
    pgName = document.getElementById('pgName').value
    if(pgName === 'p1.jpg'){
        document.getElementById('startX').value = 285
        document.getElementById('startY').value = 390
        document.getElementById('charSpacing').value = 7
        document.getElementById('wordSpacing').value = 30
        document.getElementById('lineHt').value = 65.5769
        document.getElementById('fontSize').value = 0.7
    }
    else{
        document.getElementById('startX').value = 261
        document.getElementById('startY').value = 384
        document.getElementById('charSpacing').value = 7
        document.getElementById('wordSpacing').value = 30
        document.getElementById('lineHt').value = 65.2069
        document.getElementById('fontSize').value = 0.7
    }
}

function draw() {

}
function myInputEvent() {
    background(20);

    image(bg, 0, 0, canvX, canvY, 0, 0, bg.width, bg.height)

    let startX =parseFloat(document.getElementById('startX').value),
    startY = parseFloat(document.getElementById('startY').value),
    charSpacing = parseFloat(document.getElementById('charSpacing').value),
    wordSpacing=parseFloat(document.getElementById('wordSpacing').value);
    let X = startX
    let Y = startY
    let lineHt =parseFloat(document.getElementById('lineHt').value)
    let fontSize = parseFloat(document.getElementById('fontSize').value);

    let widthPadding = pgName == "p1.jpg" ? 40 : 150

    inputTxt = document.getElementById('TXTAREA').value

    words = inputTxt.split(' ')

    for (let i = 0; i < words.length; i++ ){
        wordWidth = 0
        w = []
        for(let j =0; j< words[i].length; j++){
            if(words[i][j] == '\n'){
                w.push('\r')
            }else if(words[i][j] == '\t'){
                w.push('\t')
            }else if(words[i][j] == '\\'){
                w.push('\\')
            }else if(words[i][j] == '`'){
                img = font['fi'][int(random(-1,3))]
                w.push({
                    'fi' : img

                })
                wordWidth += img.width*fontSize

            }else if(words[i][j] in font){
                letter = int(random(-1,3))
                img = font[words[i][j]][letter]
                wordWidth += img.width*fontSize
                w.push({
                    [words[i][j]] : img
                })
            }
        }

        if (X+wordWidth > width-widthPadding){
            X = startX
            Y+=lineHt
        }

        for (let j = 0; j < w.length; j++){
            if(w[j] == '\r'){
                X = startX
                Y += lineHt
            }else if(w[j] == '\t'){
                X += int(random(wordSpacing/1.5, wordSpacing))*4
            }else if(w[j] == '\\'){
                console.log("bkcps")
                X -= wordSpacing
            }else{
                key = Object.keys(w[j])[0]

                img = w[j][key]
                imgX = X
                imgY = (key == 'g' || key == 'j' ||
                        key == 'p' || key == 'q' ||
                        key == 'y') ? Y-(img.height*fontSize)/2 : key == ',' ? Y-(img.height*fontSize)/2.5 : Y-(img.height*fontSize)
                imgHt = img.height*fontSize;
                imgWt = img.width*fontSize;

                randAngle = random(-5, 5)

                translate(imgX, imgY)
                rotate(PI/180*randAngle)
                image(img, 0, 0, imgWt, imgHt, 0, 0, img.width, img.height)
                rotate(-PI/180*randAngle)
                translate(-imgX, -imgY)
                X += imgWt+int(random(3, charSpacing+1));
            }
        }

        X += int(random(wordSpacing*0.4, wordSpacing))
    }
}

function mousePressed(){
    console.log(mouseX, mouseY)
}